/* =================================================================
   DRAWER STYLES
   Glass panel, drawer transitions, states
   ================================================================= */

/* --- GLASS PANEL --- */
.glass-panel {
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.9);
}

/* Drawer Transition - GPU accelerated with transform */
#list-drawer {
    transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1),
                opacity 0.25s ease-out;
    will-change: transform, opacity;
    opacity: 0; /* Hidden by default until JS initializes */
}

/* Desktop drawer states */
@media (min-width: 768px) {
    #list-drawer {
        height: calc(100 * var(--vh) - 100px);
        max-height: none;
    }
    #list-drawer.drawer-closed {
        opacity: 0;
        transform: translateY(-20px);
        pointer-events: none;
    }
    #list-drawer.drawer-open {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }
}

/* Mobile drawer states - 3 snap points: peek, half, open */
@media (max-width: 767px) {
    #list-drawer {
        height: calc(85 * var(--vh));
        max-height: none;
    }
    /* Peek state: shows drag handle + preview (~120px visible) */
    #list-drawer.drawer-peek {
        transform: translateY(calc(100% - 120px));
        opacity: 1;
        pointer-events: auto;
    }
    /* Half state: ~45% of screen for quick scanning */
    #list-drawer.drawer-half {
        transform: translateY(55%);
        opacity: 1;
        pointer-events: auto;
    }
    /* Open state: full drawer */
    #list-drawer.drawer-open {
        transform: translateY(0);
        opacity: 1;
        pointer-events: auto;
    }
}

/* iOS rubber-banding fix + dynamic viewport height */
#list-content {
    overscroll-behavior: contain;
    max-height: calc(65 * var(--vh));
}
@media (min-width: 768px) {
    #list-content { max-height: calc(100 * var(--vh) - 200px); }
}

/* Safe area insets for iPhone X+ */
.glass-panel.rounded-full { padding-top: max(0.375rem, env(safe-area-inset-top)); }
#list-drawer { padding-bottom: env(safe-area-inset-bottom); }

/* --- DRAG HANDLE --- */
.drag-handle {
    /* 48px minimum touch target (WCAG AAA compliant) */
    min-width: 48px;
    min-height: 48px;
    /* Visual feedback on drag */
    transition: transform 0.1s ease-out;
}

.drag-handle:active {
    transform: translateX(-50%) scale(1.05);
}

.drag-handle span {
    transition: background-color 0.15s ease, transform 0.15s ease;
}

.drag-handle:active span {
    background-color: rgba(255, 255, 255, 0.7);
    transform: scaleX(1.1);
}
