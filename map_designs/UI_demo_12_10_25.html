<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI Demo - Search + Modal + Show List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Map Background */
        .map-bg {
            background-color: #1a1a1a;
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 24px 24px;
        }
    </style>
</head>
<body class="h-screen w-screen overflow-hidden relative bg-neutral-900">

    <!-- FAKE MAP -->
    <div class="absolute inset-0 z-0 map-bg">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-neutral-700 font-bold text-6xl pointer-events-none select-none tracking-widest">NYC</div>
    </div>

    <!-- ============================================ -->
    <!-- 1. EXPANDABLE CIRCLE SEARCH BAR             -->
    <!-- ============================================ -->
    <div class="absolute top-4 left-4 z-50">
        <div id="search-container"
             class="bg-black/90 backdrop-blur-xl h-12 w-12 rounded-full shadow-2xl flex items-center overflow-hidden transition-all duration-500 ease-[cubic-bezier(0.23,1,0.32,1)] cursor-pointer border border-white/10 hover:border-white/20"
             onclick="expandSearch()">

            <!-- Search Icon (always visible) -->
            <div class="min-w-[3rem] h-12 flex items-center justify-center text-neutral-400 hover:text-white transition-colors">
                <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </div>

            <!-- Input (hidden when collapsed) -->
            <input id="search-input" type="text"
                class="flex-1 h-full bg-transparent border-none outline-none text-white placeholder-neutral-500 text-sm font-medium opacity-0 pointer-events-none transition-opacity duration-300"
                placeholder="Find mics near... (e.g. Union Square)"
                autocomplete="off"
            >

            <!-- Close button (hidden when collapsed) -->
            <button onclick="collapseSearch(event)"
                    class="mr-3 p-1.5 text-neutral-500 hover:text-white opacity-0 pointer-events-none transition-all hover:bg-white/10 rounded-full"
                    id="search-close">
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 2. VENUE MODAL WITH X BUTTON                -->
    <!-- ============================================ -->
    <div id="venue-modal" class="fixed inset-0 z-[1000] flex items-end justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-300" onclick="closeModal(event)">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>

        <!-- Modal Card -->
        <div class="venue-card relative bg-neutral-900 border border-white/10 rounded-2xl w-full max-w-[380px] overflow-hidden transform translate-y-8 transition-transform duration-300 mb-4">

            <!-- X CLOSE BUTTON -->
            <button onclick="closeModalDirect()" class="absolute top-3 right-3 z-10 w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-neutral-400 hover:text-white flex items-center justify-center transition-all">
                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>

            <!-- Header -->
            <div class="p-4 border-b border-white/10">
                <div class="flex justify-between items-start pr-8">
                    <div>
                        <h1 class="text-white font-bold text-lg">The Gray Mare</h1>
                        <span class="text-neutral-500 text-sm">61 2nd Ave · East Village</span>
                    </div>
                    <a href="#" class="shrink-0 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                        <span class="block text-xs opacity-70">12 min</span>
                        <span>Directions</span>
                    </a>
                </div>
            </div>

            <!-- Mic Info -->
            <div class="p-4 border-b border-white/10">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-rose-500/20 flex items-center justify-center text-rose-400">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                            <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                        </svg>
                    </div>
                    <div>
                        <span class="text-white font-semibold">7:00 PM</span>
                        <span class="ml-2 px-2 py-0.5 bg-amber-500/20 text-amber-400 text-xs rounded font-medium">Web Signup</span>
                    </div>
                </div>
                <p class="text-neutral-400 text-sm mt-3">$7.62 fee (includes drink/fries). List opens online at 6:30 PM.</p>
                <div class="flex gap-2 mt-3">
                    <a href="#" class="flex-1 bg-rose-500/20 hover:bg-rose-500/30 text-rose-400 py-2 rounded-lg text-sm font-medium text-center transition-colors">Sign Up</a>
                    <a href="#" class="flex-1 bg-white/5 hover:bg-white/10 text-neutral-300 py-2 rounded-lg text-sm font-medium text-center transition-colors">Host IG</a>
                </div>
            </div>

            <!-- Transit -->
            <div class="p-4">
                <div class="text-neutral-500 text-xs font-semibold uppercase tracking-wider mb-2">Nearby Transit</div>
                <div class="flex items-center gap-3 text-sm">
                    <span class="w-6 h-6 bg-[#ff6319] text-white rounded font-bold text-xs flex items-center justify-center">F</span>
                    <span class="text-white">2nd Ave</span>
                    <span class="text-neutral-500">· 3 min walk</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 3. BOTTOM DRAWER (simplified)               -->
    <!-- ============================================ -->
    <div id="drawer" class="fixed bottom-0 left-0 right-0 z-40 transition-transform duration-500 ease-[cubic-bezier(0.32,0.72,0,1)]">
        <div class="mx-4 mb-4 bg-black/95 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden max-w-md mx-auto">

            <!-- Header (always visible) -->
            <div onclick="toggleDrawer()" class="p-4 cursor-pointer flex justify-between items-center">
                <div>
                    <h2 class="text-white font-bold text-lg">Mics Nearby</h2>
                    <p class="text-neutral-500 text-xs">12 results</p>
                </div>
                <div class="text-neutral-400">
                    <svg id="drawer-chevron" class="w-5 h-5 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7"/>
                    </svg>
                </div>
            </div>

            <!-- Content (hidden when collapsed) -->
            <div id="drawer-content" class="max-h-0 overflow-hidden transition-all duration-500">
                <div class="px-4 pb-4 space-y-2">
                    <div onclick="openModal()" class="bg-white/5 p-3 rounded-xl cursor-pointer hover:bg-white/10 transition-colors">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-rose-400 text-sm font-semibold">7:00 PM</span>
                            <span class="text-green-400 text-[10px] font-bold uppercase">Live Now</span>
                        </div>
                        <div class="text-white font-medium">The Gray Mare</div>
                        <div class="text-neutral-500 text-xs">East Village · $7.62</div>
                    </div>
                    <div class="bg-white/5 p-3 rounded-xl cursor-pointer hover:bg-white/10 transition-colors">
                        <div class="text-neutral-500 text-sm font-semibold mb-1">8:00 PM</div>
                        <div class="text-white font-medium">Comedy Cellar</div>
                        <div class="text-neutral-500 text-xs">Greenwich Village · $5</div>
                    </div>
                    <div class="bg-white/5 p-3 rounded-xl cursor-pointer hover:bg-white/10 transition-colors">
                        <div class="text-neutral-500 text-sm font-semibold mb-1">8:30 PM</div>
                        <div class="text-white font-medium">Stand Up NY</div>
                        <div class="text-neutral-500 text-xs">Upper West Side · Free</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- 4. "SHOW LIST" FLOATING BUTTON              -->
    <!-- ============================================ -->
    <div id="show-list-btn" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-30 transition-all duration-500 ease-[cubic-bezier(0.34,1.56,0.64,1)] translate-y-32 opacity-0 pointer-events-none">
        <button onclick="showDrawer()" class="bg-black text-white px-6 py-3.5 rounded-full shadow-2xl flex items-center gap-2 font-semibold border border-white/20 hover:bg-neutral-900 hover:scale-105 active:scale-95 transition-all">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
            Show List
        </button>
    </div>

    <!-- ============================================ -->
    <!-- DEMO CONTROLS                               -->
    <!-- ============================================ -->
    <div class="fixed top-4 right-4 z-50 bg-black/90 border border-white/10 rounded-xl p-4 space-y-2">
        <div class="text-neutral-500 text-xs font-semibold uppercase tracking-wider mb-2">Demo Controls</div>
        <button onclick="openModal()" class="w-full bg-white/10 hover:bg-white/20 text-white text-sm py-2 px-3 rounded-lg transition-colors">Open Modal</button>
        <button onclick="hideDrawer()" class="w-full bg-white/10 hover:bg-white/20 text-white text-sm py-2 px-3 rounded-lg transition-colors">Hide Drawer</button>
        <button onclick="showDrawer()" class="w-full bg-white/10 hover:bg-white/20 text-white text-sm py-2 px-3 rounded-lg transition-colors">Show Drawer</button>
    </div>

    <script>
        // --- SEARCH ---
        const searchContainer = document.getElementById('search-container');
        const searchInput = document.getElementById('search-input');
        const searchClose = document.getElementById('search-close');
        let searchOpen = false;

        function expandSearch() {
            if (searchOpen) return;
            searchOpen = true;
            searchContainer.classList.remove('w-12');
            searchContainer.classList.add('w-[24rem]');
            searchInput.classList.remove('opacity-0', 'pointer-events-none');
            searchClose.classList.remove('opacity-0', 'pointer-events-none');
            setTimeout(() => searchInput.focus(), 100);
        }

        function collapseSearch(e) {
            if (e) e.stopPropagation();
            searchOpen = false;
            searchInput.value = '';
            searchContainer.classList.add('w-12');
            searchContainer.classList.remove('w-[24rem]');
            searchInput.classList.add('opacity-0', 'pointer-events-none');
            searchClose.classList.add('opacity-0', 'pointer-events-none');
        }

        // --- MODAL ---
        const modal = document.getElementById('venue-modal');
        const modalCard = modal.querySelector('.venue-card');

        function openModal() {
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modalCard.classList.remove('translate-y-8');
        }

        function closeModal(e) {
            if (e.target === modal || e.target.classList.contains('bg-black/60')) {
                closeModalDirect();
            }
        }

        function closeModalDirect() {
            modal.classList.add('opacity-0', 'pointer-events-none');
            modalCard.classList.add('translate-y-8');
        }

        // --- DRAWER ---
        const drawer = document.getElementById('drawer');
        const drawerContent = document.getElementById('drawer-content');
        const drawerChevron = document.getElementById('drawer-chevron');
        const showListBtn = document.getElementById('show-list-btn');
        let drawerOpen = false;
        let drawerVisible = true;

        function toggleDrawer() {
            drawerOpen = !drawerOpen;
            if (drawerOpen) {
                drawerContent.classList.remove('max-h-0');
                drawerContent.classList.add('max-h-[400px]');
                drawerChevron.classList.add('rotate-180');
            } else {
                drawerContent.classList.add('max-h-0');
                drawerContent.classList.remove('max-h-[400px]');
                drawerChevron.classList.remove('rotate-180');
            }
        }

        function hideDrawer() {
            drawerVisible = false;
            drawer.classList.add('translate-y-full');
            showListBtn.classList.remove('translate-y-32', 'opacity-0', 'pointer-events-none');
        }

        function showDrawer() {
            drawerVisible = true;
            drawer.classList.remove('translate-y-full');
            showListBtn.classList.add('translate-y-32', 'opacity-0', 'pointer-events-none');
        }

        // Escape key closes modal and collapses search
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModalDirect();
                collapseSearch();
            }
        });
    </script>
</body>
</html>
